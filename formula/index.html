<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Formula Quick Reference</title>
  <meta name="description" content="快速数学公式参考（支持 LaTeX/KaTeX）。在学习或做题时快速打开查看。" />

  <!-- KaTeX (fast) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
  <style>
    :root{--bg:#0f1720;--card:#0b1220;--muted:#9aa6b2;--accent:#6ee7b7}
    body{font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Helvetica Neue", Arial; margin:0; background:linear-gradient(180deg,#071028 0%, #071a2a 100%); color:#e6eef6}
    .wrap{max-width:980px;margin:32px auto;padding:24px}
    header{display:flex;align-items:center;gap:16px}
    h1{margin:0;font-size:1.4rem}
    p.lead{margin:6px 0 18px;color:var(--muted)}
    .grid{display:grid;grid-template-columns:1fr 340px;gap:20px}
    .card{background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);padding:16px;border-radius:10px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    .formula{padding:12px;border-radius:8px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));margin-bottom:12px}
    .formula h3{margin:0 0 8px;font-size:0.95rem}
    .controls{display:flex;gap:8px;margin-top:8px}
    .btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:6px 10px;border-radius:7px;color:var(--muted);cursor:pointer}
    .btn.ghost{background:transparent}
    label{display:block;font-size:0.85rem;margin-bottom:6px;color:var(--muted)}
    input,textarea,select{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:inherit}
    .small{font-size:0.85rem;color:var(--muted)}
    .right-panel{position:sticky;top:20px;height:calc(100vh - 40px);overflow:auto}
    footer.small{color:var(--muted);font-size:0.85rem;margin-top:18px}
    .search{margin:10px 0}
    .user-form{display:grid;gap:8px}
    .muted{color:var(--muted)}
  .subject-section{margin-bottom:14px;padding:0}
  .section-header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 14px;border-bottom:1px solid rgba(255,255,255,0.03);background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border-radius:8px 8px 0 0}
  .section-header h2{margin:0;font-size:1.05rem}
  .section-content{padding:12px}
  .toggle-btn{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:6px 10px;border-radius:7px;cursor:pointer}
  .subject-section.collapsed .section-content{display:none}
  .template-card{white-space:pre-wrap;word-break:break-word;background:rgba(0,0,0,0.02);padding:10px;border-radius:6px;border:1px dashed rgba(255,255,255,0.03);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, "Courier New", monospace;font-size:0.9rem}
    @media (max-width:980px){.grid{grid-template-columns:1fr}.right-panel{position:static;height:auto}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="24" height="24" rx="4" fill="#0EA5A4"/><path d="M7 8h10M7 12h6M7 16h4" stroke="#072A2A" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      <div>
        <h1>数学物理公式速查</h1>
        <p class="lead">常用公式查阅</p>
      </div>
    </header>

    <div class="grid">
      <main class="card" id="main">
        <div class="small muted">@TianyiZhang</div>

        <section id="builtin" style="margin-top:12px">

          <div class="subject-section card collapsed">
            <div class="section-header">
              <h2>矢量恒等式</h2>
              <button class="toggle-btn" aria-expanded="false">展开</button>
            </div>
            <div class="section-content">
                
              <div class="formula">
                <h3>常用矢量恒等式</h3>
                <div>$\nabla\times(\nabla f)=0$</div>
                <div>$\nabla\cdot(\nabla\times \mathbf{F})=0$</div>
                <div>$\nabla\times(\nabla\times \mathbf{F})=\nabla(\nabla\cdot \mathbf{F})-\nabla^2\mathbf{F}$</div>
                <div>$\nabla \cdot (\phi \mathbf{F}) = (\nabla \phi) \cdot \mathbf{F} + \phi (\nabla \cdot \mathbf{F})$</div>
                <div>$\nabla \times (\mathbf{A}\times \mathbf{B}) = \mathbf{A}(\nabla \cdot \mathbf{B}) - \mathbf{B}(\nabla \cdot \mathbf{A}) + (\mathbf{B} \cdot \nabla) \mathbf{A} - (\mathbf{A} \cdot \nabla) \mathbf{B}$</div>
              </div>
            </div>
          </div>
          <!-- Example subject section: Classical Vector Calculus -->
           
          <div class="subject-section card collapsed">
            <div class="section-header">
              <h2>直角坐标</h2>
              <button class="toggle-btn" aria-expanded="false">展开</button>
            </div>
            <div class="section-content">
              <div class="formula">
                <h3>梯度</h3>
                <div>$\nabla f = \left(\frac{\partial f}{\partial x},\frac{\partial f}{\partial y},\frac{\partial f}{\partial z}\right)$</div>
                <h3>散度</h3>
                <div>$\nabla\cdot \mathbf{F} = \frac{\partial F_x}{\partial x}+\frac{\partial F_y}{\partial y}+\frac{\partial F_z}{\partial z}$</div>
                <h3>旋度</h3>
                <div>$\nabla \times \mathbf{F}=\left(\frac{\partial F_z}{\partial y}-\frac{\partial F_y}{\partial z},\;\frac{\partial F_x}{\partial z}-\frac{\partial F_z}{\partial x},\;\frac{\partial F_y}{\partial x}-\frac{\partial F_x}{\partial y}\right)$</div>
                <h3>拉普拉斯算符（标量）</h3>
                <div>$\nabla^2 f = \frac{\partial^2 f}{\partial x^2} + \frac{\partial^2 f}{\partial y^2} + \frac{\partial^2 f}{\partial z^2}$</div>
                <h3>拉普拉斯算符（矢量）</h3>
                <div>$\nabla^2 \mathbf{F} = \nabla (\nabla \cdot \mathbf{F}) - \nabla \times (\nabla \times \mathbf{F}) = \left(\frac{\partial^2 F_x}{\partial x^2} + \frac{\partial^2 F_x}{\partial y^2} + \frac{\partial^2 F_x}{\partial z^2}, \frac{\partial^2 F_y}{\partial x^2} + \frac{\partial^2 F_y}{\partial y^2} + \frac{\partial^2 F_y}{\partial z^2}, \frac{\partial^2 F_z}{\partial x^2} + \frac{\partial^2 F_z}{\partial y^2} + \frac{\partial^2 F_z}{\partial z^2}\right)$</div>
              </div>

              
            </div>
          </div>

          <!-- Example subject section: Curvilinear Coordinates -->
          <div class="subject-section card collapsed">
            <div class="section-header">
              <h2>曲线坐标系（柱/球等）</h2>
              <button class="toggle-btn" aria-expanded="false">展开</button>
            </div>
            <div class="section-content">
              <div class="formula">
                <h3>柱坐标</h3>
                <div>梯度： $\nabla f = \hat{\mathbf{e}}_r \frac{\partial f}{\partial r} + \hat{\mathbf{e}}_\theta \frac{1}{r}\frac{\partial f}{\partial \theta} + \hat{\mathbf{e}}_z \frac{\partial f}{\partial z}$</div>
                <div>散度： $\nabla\cdot \mathbf{F} = \frac{1}{r}\frac{\partial}{\partial r}(r F_r) + \frac{1}{r}\frac{\partial F_\theta}{\partial \theta} + \frac{\partial F_z}{\partial z}$</div>
                <div>拉普拉斯（标量）： $\nabla^2 f = \frac{1}{r}\frac{\partial}{\partial r}\left(r\frac{\partial f}{\partial r}\right) + \frac{1}{r^2}\frac{\partial^2 f}{\partial \theta^2} + \frac{\partial^2 f}{\partial z^2}$</div>
              </div>

              <div class="formula">
                <h3>球坐标</h3>
                <div>梯度： $\nabla f = \hat{\mathbf{e}}_r \frac{\partial f}{\partial r} + \hat{\mathbf{e}}_\theta \frac{1}{r}\frac{\partial f}{\partial \theta} + \hat{\mathbf{e}}_\varphi \frac{1}{r\sin\theta}\frac{\partial f}{\partial \varphi}$</div>
                <div>散度： $\nabla\cdot \mathbf{F} = \frac{1}{r^2}\frac{\partial}{\partial r}(r^2 F_r) + \frac{1}{r\sin\theta}\frac{\partial}{\partial \theta}(\sin\theta F_\theta) + \frac{1}{r\sin\theta}\frac{\partial F_\varphi}{\partial \varphi}$</div>
                <div>拉普拉斯（标量）： $\nabla^2 f = \frac{1}{r^2}\frac{\partial}{\partial r}\left(r^2\frac{\partial f}{\partial r}\right) + \frac{1}{r^2\sin\theta}\frac{\partial}{\partial \theta}\left(\sin\theta\frac{\partial f}{\partial \theta}\right) + \frac{1}{r^2\sin^2\theta}\frac{\partial^2 f}{\partial \varphi^2}$</div>
              </div>
            </div>
          </div>

          <div class="subject-section card collapsed">
            <div class="section-header">
              <h2>流体力学</h2>
              <button class="toggle-btn" aria-expanded="false">展开</button>
            </div>
            <div class="section-content">
                
              <div class="formula">
                <h3>连续性方程</h3>
                <div>不可压缩流体： $\nabla \cdot \vec{u} = 0$</div>
                <div>可压缩流体： $\frac{\partial \rho}{\partial t} + \nabla \cdot (\rho \vec{u}) = 0$</div>
                <h3>欧拉方程</h3>
                <div>$\frac{\partial \vec{u}}{\partial t} + (\vec{u} \cdot \nabla) \vec{u} = -\frac{1}{\rho} \nabla p + \rho \vec{g}$</div>
                <h3>纳维-斯托克斯方程</h3>
                <div>$\frac{\partial \vec{u}}{\partial t} + (\vec{u} \cdot \nabla) \vec{u} = -\frac{1}{\rho} \nabla p + \nu \nabla^2 \vec{u} + \vec{g}$</div>
                <div>$\rho \frac{D\vec{u}}{Dt} = -\nabla p + \mu \nabla^2 \vec{u} + \rho \vec{g}$</div>
                <h3>斯托克斯方程</h3>
                <div>$\nabla p = \mu\nabla^2 \vec{u}$</div>

              </div>
              <div class="formula">
                <h3>雷诺数</h3>
                <div>$Re = \frac{\rho U L}{\mu} = \frac{U L}{\nu}$</div>
                <h3>流函数</h3>
                <div>直角坐标：$u_x = \frac{\partial \Psi}{\partial y}, u_y = -\frac{\partial \Psi}{\partial x}$</div>
                <div>球坐标：$u_r = \frac{1}{r^2\sin\theta}\frac{\partial \Psi}{\partial \theta}, u_\theta = -\frac{1}{r\sin\theta}\frac{\partial \Psi}{\partial r}$</div>
                <h3>斯托克斯流函数（均匀来流通解）</h3>
                <div>$\Psi(r,\theta) = f(r) \sin^2\theta = (Ar + \frac{B}{r} + Cr^2 + Dr^4)\sin^2\theta$</div>
            </div>
          </div>

          <!-- You can add more subject sections below by copying the template shown at the bottom of the page -->
        </section>

      </main>

      
    </div>

    <footer class="small muted">Created for quick reference • @TianyiZhang</footer>
  </div>

  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"></script>
  <script>
    function renderAll(){
      renderMathInElement(document.body, {
        delimiters: [{left:'$$',right:'$$',display:true},{left:'$',right:'$',display:false}],
        throwOnError:false
      });
    }

    document.addEventListener('DOMContentLoaded', ()=>{
      // 渲染页面中所有用 $...$ / $$...$$ 包裹的公式
      renderAll();

      // 绑定折叠按钮
      document.querySelectorAll('.toggle-btn').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const section = btn.closest('.subject-section');
          const expanded = btn.getAttribute('aria-expanded') === 'true';
          if(section){
            if(expanded){
              section.classList.add('collapsed');
              btn.textContent = '展开';
              btn.setAttribute('aria-expanded','false');
            } else {
              section.classList.remove('collapsed');
              btn.textContent = '折叠';
              btn.setAttribute('aria-expanded','true');
              // 重渲染新显示的公式
              renderAll();
            }
          }
        });
      });

      // 复制模板
      const tplBtn = document.getElementById('copyTemplate');
      if(tplBtn){
        tplBtn.addEventListener('click', ()=>{
          const tpl = document.getElementById('template').textContent.trim();
          navigator.clipboard.writeText(tpl).then(()=>{ tplBtn.textContent='已复制'; setTimeout(()=> tplBtn.textContent='复制模板',1200); }).catch(()=> alert('复制失败，请手动选择文本复制'));
        });
      }
    });
  </script>
</body>
</html>